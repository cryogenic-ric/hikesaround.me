function PageVM(){var self=this;self.status=ko.observable("Send"),self.error=ko.observable()}function on_send_success(resp){$("#enquiry-btn").attr("disabled",!0),pagevm.status("Successful!")}function on_send_err(resp){var resp=resp.responseJSON;pagevm.error(resp.result.msg),pagevm.status("Retry")}function on_enquiry(){pagevm.error("");var url=apihost+"/api/enquiry/",data=form2json("#enquiry-form");data.event_id=$.cookie("evt-id"),apipost(url,data,on_send_success,on_send_err)}$("#enq-to").text("To: "+$.cookie("evt-biz")),$("#enq-subject").text("Subject: About "+$.cookie("evt-name"));var pagevm=new PageVM;$("form").submit(function(event){return pagevm.status("Sending .."),on_enquiry(),!1}),window.onload=function(){ko.applyBindings(pagevm)};