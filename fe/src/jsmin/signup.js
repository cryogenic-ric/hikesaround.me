function hide_login(){"#signup"==window.location.hash.toLowerCase()&&$(".login-section").hide()}function PageVM(){var self=this;self.status=ko.observable("Signup"),self.error=ko.observable(),self.login_status=ko.observable("Log In"),self.login_error=ko.observable()}function on_login_success(){$("#signup-btn").attr("disabled",!0),pagevm.login_status("Login successful!"),window.location.assign("/dashboard")}function on_login_err(resp){pagevm.login_error(resp.result.msg),pagevm.login_status("Try again")}function on_login(){pagevm.login_error("");var email=$("#login-email").val(),password=$("#login-pass").val();login(email,password,on_login_success,on_login_err)}function on_signup_success(){$("#signup-btn").attr("disabled",!0),pagevm.status("Please check your email for confirmation")}function on_signup_err(resp){pagevm.error(resp.result.msg),pagevm.status("Try again")}function on_signup(){pagevm.error("");var url=apihost+"/api/biz/signup/",data={email:$("#bizemail").val(),password:$("#bizpass").val()};apipost(url,data,on_signup_success,on_signup_err)}hide_login();var pagevm=new PageVM;$("#login-form").submit(function(event){return pagevm.login_status("login in progress .."),on_login(),!1}),$("#signup-form").submit(function(event){return pagevm.status("signup in progress .."),on_signup(),!1}),window.onload=function(){ko.applyBindings(pagevm)};