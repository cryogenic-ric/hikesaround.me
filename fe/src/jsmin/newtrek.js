function PageVM(){var self=this;self.status=ko.observable("Publish"),self.error=ko.observable()}function on_newtrek_success(resp){$("#newtrek-btn").attr("disabled",!0),pagevm.status("Successful!")}function on_newtrek_err(resp){console.log(resp);var resp=resp.responseJSON;pagevm.error(resp.result.msg),pagevm.status("Save")}function on_newtrek(){pagevm.error("");var url=apihost+"/api/treks/",data=form2json("#newtrek-form");apipost(url,data,on_newtrek_success,on_newtrek_err)}var pagevm=new PageVM;$("#newtrek-form").submit(function(event){return pagevm.status("Saving adventure.."),on_newtrek(),!1}),window.onload=function(){ko.applyBindings(pagevm),$("form [name=starts]").change(function(){$("form [name=ends]").attr("min",$(this).val())})};